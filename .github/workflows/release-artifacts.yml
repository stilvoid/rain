on:
  release:
    types:
      - published

name: Attach artifacts to release

jobs:
  build:
    name: Build cross-platform artifacts
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Build
        uses: thatisuday/go-cross-build@v1
        with:
          platforms: linux/amd64, linux/386, linux/arm, darwin/amd64, windows/ams64, windows/386
          package: ./cmd/rain
          name: rain
          compress: true
          dest: dist
